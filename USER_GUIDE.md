# SomniQ - User Guide & Project Overview

## What is SomniQ?

SomniQ is a sleep disorder monitoring application designed to help people with sleep disorders track their nighttime behaviors and get alerts when potentially harmful sleep activities occur. The app uses sound analysis to detect dangerous sleep behaviors like sleepwalking, extreme nightmares, or physical thrashing that could lead to injury.

### The Problem SomniQ Solves

People with sleep disorders like sleepwalking, night terrors, or REM behavior disorder often engage in dangerous behaviors while asleep that they're unaware of. These behaviors can lead to injury, wandering, or harm to themselves or others. SomniQ addresses this by:

- **Monitoring Sleep Behaviors**: Using sound analysis to detect potentially dangerous sleep activities
- **Real-Time Alerting**: Waking you up when harmful behaviors are detected
- **Tracking Sleep Episodes**: Recording and analyzing patterns of sleep disturbances
- **Community Support**: Connecting with others dealing with similar sleep disorders

## How SomniQ Works

### 1. **Sleep Behavior Monitoring**
SomniQ uses Apple's sound recognition technology to identify sounds that indicate potentially dangerous sleep behaviors. The app can detect:

- **Dangerous Sleep Activities**: Thrashing, falling, sleepwalking sounds, extreme nightmares
- **Physical Distress**: Gasping for air, screaming, crying during sleep
- **Environmental Hazards**: Breaking glass, falling objects, door slams
- **Emergency Situations**: Smoke alarms, sirens, urgent sounds

### 2. **Alert System for Sleep Safety**
The app has an alert system designed to wake you up when potentially dangerous sleep behaviors are detected:

- **Very Conservative**: Only alerts for the most serious, sustained dangerous behaviors
- **Conservative**: Alerts for significant dangerous behaviors with longer delays
- **Balanced**: Default setting that alerts for moderate to serious sleep behaviors
- **Sensitive**: Alerts for potentially dangerous behaviors with faster response
- **Very Sensitive**: Maximum sensitivity for any potentially harmful sleep activity

### 3. **Sleep Episode Tracking**
You can manually log sleep disorder episodes when they occur, including:
- **Severity Levels**: Mild, moderate, or severe episodes
- **Symptoms**: Sleepwalking, night terrors, REM behavior disorder, gasping, thrashing, etc.
- **Notes**: Personal observations about what happened
- **Duration**: How long the episode lasted

### 4. **Data Analysis & Insights**
The app analyzes your sleep disorder data to provide insights:
- **Pattern Recognition**: Identifying recurring dangerous sleep behaviors
- **Sound Correlation**: Connecting detected sounds with logged sleep episodes
- **Trend Analysis**: Tracking frequency and severity of sleep disorder episodes
- **Weekly/Monthly Reports**: Comprehensive sleep disorder summaries

## Key Features Explained

### üé§ **Sleep Behavior Monitoring**
**What it does**: Continuously monitors for potentially dangerous sleep behaviors using your iPhone's microphone.

**How it works**:
1. Place your iPhone near your sleeping area
2. Start a monitoring session before sleep
3. The app listens and analyzes sounds in real-time
4. Dangerous sleep behaviors are detected and logged automatically
5. Monitoring stops when you manually stop it

**Privacy**: All audio analysis happens on your device - no audio is sent to external servers unless you choose to backup your data.

### üö® **Safety Alert System**
**What it does**: Alerts you when potentially dangerous sleep behaviors are detected, with customizable sensitivity levels.

**How it works**:
- **Critical Alerts**: Immediate wake-up alerts for serious dangers (gasping for air, screaming, emergency sounds)
- **High Priority**: Quick alerts for dangerous sleep behaviors (thrashing, falling sounds, extreme distress)
- **Medium Priority**: Moderate alerts for potentially harmful activities (movement, speech during sleep)
- **Low Priority**: Gentle alerts for minor sleep disturbances (light movement, ambient sounds)

**Customization**: You can adjust sensitivity with a simple slider from "Very Conservative" to "Very Sensitive."

### üìä **Sleep Disorder Episode Tracking**
**What it does**: Allows you to manually log sleep disorder episodes and symptoms.

**How it works**:
1. When you experience a sleep disorder episode, open the app
2. Select the severity level (mild, moderate, severe)
3. Choose from sleep disorder symptoms (sleepwalking, night terrors, REM behavior disorder, etc.)
4. Add personal notes about what happened
5. Optionally link to an audio recording

**Benefits**: Creates a comprehensive sleep disorder diary that helps identify patterns and triggers.

### üìà **Sleep Disorder Analytics**
**What it does**: Provides insights into your sleep disorder patterns and trends.

**Features**:
- **Visual Charts**: Graphs showing sleep disorder episodes over time
- **Sound Analysis**: Breakdown of detected dangerous behaviors by type and frequency
- **Episode Correlation**: Connection between detected sounds and logged sleep disorder episodes
- **Trend Identification**: Recognition of improving or worsening sleep disorder patterns

### üè• **Health Integration**
**What it does**: Connects with Apple Health to provide comprehensive health tracking.

**Integration**:
- **Sleep Data**: Syncs sleep episodes with Health app
- **Vital Signs**: Can correlate with heart rate and other health metrics
- **Medical Reports**: Export data for healthcare providers


**Critical Tier** (Immediate wake-up alerts):
- Gasping for air, screaming, emergency sirens
- Smoke alarms, breaking glass, explosions, gunshots
- These sounds indicate immediate danger or serious sleep disorder episodes

**High Tier** (Quick alerts for dangerous behaviors):
- Snoring (can indicate sleep apnea), coughing, crying during sleep
- Dog barking, thunder (can trigger sleep disorder episodes)
- These sounds indicate potentially dangerous sleep behaviors

**Medium Tier** (Moderate alerts for concerning activities):
- Speech during sleep, laughter, door slams, phone rings
- Car horns, helicopters, airplanes (can cause sleep disturbances)
- These sounds might indicate sleepwalking or other concerning activities

**Low Tier** (Minimal alerts for ambient monitoring):
- Music, ambient sounds, breathing, wind
- Rain, ocean waves, fire crackling
- These sounds are generally safe but help monitor sleep environment

### Sleep Disorder Episode Severity Levels
When logging sleep disorder episodes, you can categorize them by severity:

**Mild**: Minor sleep disorder episodes with low risk of harm
- Brief episodes of sleepwalking
- Mild night terrors
- Slight sleep-related movements

**Moderate**: Noticeable sleep disorder episodes with moderate risk
- Frequent sleepwalking episodes
- Moderate night terrors or REM behavior disorder
- Sleep-related activities that could be concerning

**Severe**: Major sleep disorder episodes with high risk of harm
- Extended sleepwalking episodes
- Severe night terrors or REM behavior disorder
- Dangerous sleep-related behaviors that pose injury risk

### Understanding Sleep Disorder Patterns
SomniQ helps you identify patterns in your sleep disorders:

**Temporal Patterns**: Sleep disorder episodes that happen at specific times
- Early night vs. late night episodes
- Weekend vs. weekday differences
- Seasonal variations in episode frequency

**Environmental Patterns**: Sounds that correlate with sleep disorder episodes
- Environmental triggers for sleepwalking
- Sounds that precede night terrors
- External factors that worsen sleep disorders

**Behavioral Patterns**: Connections between sleep disorders and daily activities
- Correlation with stress levels
- Impact of diet or exercise on episodes
- Relationship to medication or treatment changes

## Customizing SomniQ for Your Needs

### Alert Sensitivity Adjustment
The app's alert system can be fine-tuned to your sleep sensitivity:

**If you're a heavy sleeper**:
- Choose "Very Conservative" or "Conservative" settings
- Longer delays before alerts
- Higher confidence thresholds required

**If you're a light sleeper**:
- Choose "Sensitive" or "Very Sensitive" settings
- Faster alert response
- Lower confidence thresholds

**If you're unsure**:
- Start with "Balanced" settings
- Adjust based on your experience
- You can change settings at any time

### Recording Schedule
**Daily Recording**: Best for comprehensive sleep monitoring
- Captures all sleep disturbances
- Provides complete picture of sleep patterns
- Requires consistent nightly routine

**Selective Recording**: Record only when you suspect issues
- Less battery usage
- Focused on problem nights
- Good for identifying specific triggers

**Periodic Recording**: Record a few nights per week
- Balance between comprehensive data and convenience
- Good for long-term trend monitoring
- Less demanding on device resources

### Privacy Settings
**Local-Only Mode**: All data stays on your device
- Maximum privacy protection
- No cloud backup
- Data lost if device is lost or damaged

**Cloud Backup**: Data synced to secure cloud storage
- Data accessible across devices
- Automatic backup protection
- Requires account and internet connection

**Selective Sync**: Choose what data to backup
- Balance privacy and convenience
- Audio files can stay local-only
- Metadata and logs can be synced

## Troubleshooting Common Issues

### Recording Problems
**App not detecting sounds**:
- Check microphone permissions in Settings
- Ensure device is not in silent mode
- Try placing device closer to sleeping area
- Check that recording is actually started

**Poor sound quality**:
- Clean device microphone
- Avoid placing device under pillows or blankets
- Ensure device has adequate battery
- Check for background app restrictions

**Recording stops unexpectedly**:
- Check battery level (low battery can cause issues)
- Ensure device doesn't enter low power mode
- Check for iOS updates
- Restart the app if problems persist

### Alert Issues
**Too many alerts**:
- Adjust sensitivity to "Conservative" or "Very Conservative"
- Increase debounce time in settings
- Review which sound types trigger alerts most often

**Missing important alerts**:
- Increase sensitivity to "Sensitive" or "Very Sensitive"
- Check that notifications are enabled
- Ensure app has notification permissions

**Alerts not working**:
- Check notification settings in iOS Settings
- Ensure app is not in background app refresh restrictions
- Verify that alert system is enabled in app settings

### Data Sync Problems
**Data not syncing**:
- Check internet connection
- Verify account login status
- Try signing out and back in
- Check Firebase service status

**Missing data**:
- Ensure data was saved locally before sync
- Check that cloud backup is enabled
- Verify account permissions
- Contact support if data loss is suspected

## Privacy and Security

### Your Data is Protected
**Local Processing**: All audio analysis happens on your device using Apple's secure sound recognition technology. Your actual audio recordings are not sent to external servers unless you explicitly choose to backup your data.

**Encrypted Storage**: All data is encrypted both locally and in cloud storage using industry-standard encryption methods.

**User Control**: You have complete control over your data:
- Delete recordings at any time
- Choose what data to sync
- Export your data for personal use
- Close your account and delete all data

### What Data We Collect
**Audio Recordings**: Only if you choose to backup your data
**Sound Analysis Results**: Detected sound types and timestamps
**Sleep Episodes**: Manually logged sleep disturbances
**Usage Analytics**: App performance and feature usage (anonymized)

### What We Don't Collect
- Personal health information beyond what you choose to log
- Location data
- Contact information
- Data from other apps

## Getting Help and Support

### In-App Help
- **Tutorial**: Complete walkthrough on first launch
- **Tooltips**: Helpful hints throughout the app
- **Settings Guide**: Detailed explanation of all settings

### Community Support
- **Community Forum**: Connect with other users
- **Tips and Tricks**: Learn from experienced users
- **Success Stories**: Get inspired by others' progress

### Technical Support
- **FAQ**: Answers to common questions
- **Contact Support**: Direct help for technical issues
- **Bug Reports**: Report issues for quick resolution

### Healthcare Integration
- **Data Export**: Generate reports for healthcare providers
- **Medical Disclaimer**: Important information about medical use
- **Professional Resources**: Connect with sleep specialists

## The Science Behind SomniQ

### Sound Analysis Technology
SomniQ uses Apple's SoundAnalysis framework, which employs machine learning models trained on thousands of hours of audio data. This technology can identify sounds with high accuracy while protecting your privacy by processing everything on your device.

### Sleep Research Foundation
The app's features are based on established sleep research:
- **Sleep Fragmentation**: The impact of environmental sounds on sleep quality
- **Sleep Disorders**: Recognition of common sleep-related sounds
- **Circadian Rhythms**: Understanding of natural sleep-wake cycles
- **Environmental Factors**: How surroundings affect sleep

### Continuous Improvement
SomniQ continuously improves through:
- **User Feedback**: Incorporating user suggestions and experiences
- **Research Updates**: Integrating new sleep science findings
- **Technology Advances**: Leveraging improvements in sound recognition
- **Community Insights**: Learning from the collective experience of users

## App Features and Capabilities

### Current Features
- **Real-time Sound Analysis**: Detects over 120 different sound types using Apple's SoundAnalysis framework
- **Multi-tier Alert System**: Four alert levels (Critical, High, Medium, Low) with customizable sensitivity
- **Sleep Episode Logging**: Manual tracking of sleep disorder episodes with severity classification
- **Data Analytics**: Pattern recognition and trend analysis of sleep disorder data
- **Community Features**: Support network for users with sleep disorders
- **Health Integration**: Apple HealthKit integration for comprehensive health tracking
- **Cloud Backup**: Firebase-based data synchronization across devices

### Technical Capabilities
- **Local Processing**: All sound analysis happens on-device for privacy
- **Real-time Monitoring**: Continuous audio monitoring during sleep
- **Configurable Sensitivity**: Five sensitivity profiles from Very Conservative to Very Sensitive
- **Data Export**: Ability to export data for healthcare providers
- **Offline Functionality**: Works without internet connection

## Conclusion

SomniQ is a sleep disorder monitoring application that uses sound analysis to detect potentially dangerous sleep behaviors and alert users when harmful activities occur. The app provides tools for tracking sleep disorder episodes, analyzing patterns, and connecting with others dealing with similar conditions.

The app is designed to help people with sleep disorders like sleepwalking, night terrors, and REM behavior disorder by monitoring their sleep environment and providing safety alerts when dangerous behaviors are detected.

SomniQ is designed to complement, not replace, professional medical care. If you have sleep disorders or serious sleep concerns, always consult with a healthcare provider. The app's data can be valuable information to share with your doctor, but it should not be used as a substitute for professional medical diagnosis or treatment.
